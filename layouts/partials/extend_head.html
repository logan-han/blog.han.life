{{- /* Extended head partial for SEO and performance */ -}}

{{- /* Preconnect hints for performance */ -}}
<link rel="preconnect" href="https://www.googletagmanager.com">
<link rel="dns-prefetch" href="https://www.google-analytics.com">

{{- /* Canonical URL */ -}}
<link rel="canonical" href="{{ .Permalink }}">

{{- /* Open Graph tags */ -}}
<meta property="og:site_name" content="{{ .Site.Title }}">
<meta property="og:locale" content="{{ .Site.Language.Lang }}">

{{- if .IsHome }}
<meta property="og:type" content="website">
<meta property="og:title" content="{{ .Site.Title }}">
<meta property="og:description" content="{{ .Site.Params.description }}">
<meta property="og:url" content="{{ .Site.BaseURL }}">
{{- else }}
<meta property="og:type" content="article">
<meta property="og:title" content="{{ .Title }}">
<meta property="og:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Summary | plainify | truncate 160 }}{{ end }}">
<meta property="og:url" content="{{ .Permalink }}">
<meta property="article:author" content="{{ .Site.Params.author }}">
<meta property="article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
{{- if not .Lastmod.IsZero }}
<meta property="article:modified_time" content="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}">
{{- end }}
{{- with .Params.tags }}
{{- range . }}
<meta property="article:tag" content="{{ . }}">
{{- end }}
{{- end }}
{{- end }}

{{- /* Twitter Card tags */ -}}
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}">
<meta name="twitter:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">

{{- /* Featured image for social sharing */ -}}
{{- with .Params.image }}
<meta property="og:image" content="{{ . | absURL }}">
<meta name="twitter:image" content="{{ . | absURL }}">
{{- else }}
{{- with .Site.Params.images }}
<meta property="og:image" content="{{ index . 0 | absURL }}">
<meta name="twitter:image" content="{{ index . 0 | absURL }}">
{{- end }}
{{- end }}

{{- /* Additional SEO meta tags */ -}}
{{- if not .IsHome }}
<meta name="author" content="{{ .Site.Params.author }}">
{{- end }}

{{- /* Robots meta */ -}}
<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">

{{- /* Include structured data */ -}}
{{ partial "structured-data.html" . }}
